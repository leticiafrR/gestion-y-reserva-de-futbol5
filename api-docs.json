{"openapi":"3.1.0","info":{"title":"Simple To-Do App Backend"},"servers":[{"url":"http://localhost:30002","description":"Generated server url"}],"tags":[{"name":"1 - Usuarios"},{"name":"2 - Canchas"},{"name":"2 - Sessions"},{"name":"3 - Equipos"},{"name":"home-controller"}],"paths":{"/sessions":{"put":{"tags":["2 - Sessions"],"summary":"Refresh a session","operationId":"refresh","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshDTO"}}},"required":true},"responses":{"401":{"description":"Invalid refresh token supplied"},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenDTO"}}}}}},"post":{"tags":["2 - Sessions"],"summary":"Log in, creating a new session","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginDTO"}}},"required":true},"responses":{"401":{"description":"Invalid username or password supplied"},"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenDTO"}}}}}}},"/fields/{id}":{"put":{"tags":["2 - Canchas"],"summary":"Actualizar cancha","description":"Actualiza los datos de una cancha que pertenece al usuario","operationId":"updateField","parameters":[{"name":"id","in":"path","description":"ID de la cancha","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FieldUpdateDTO"}}},"required":true},"responses":{"403":{"description":"Invalid jwt access token supplied"},"200":{"description":"Cancha actualizada exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Field"}}}},"404":{"description":"Cancha no encontrada o no pertenece al usuario","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Field"}}}},"400":{"description":"Datos inválidos","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Field"}}}}},"security":[{"Bearer Authentication":[]}]},"delete":{"tags":["2 - Canchas"],"summary":"Eliminar cancha","description":"Desactiva una cancha para que no esté más disponible","operationId":"deleteField","parameters":[{"name":"id","in":"path","description":"ID de la cancha","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Invalid jwt access token supplied"},"204":{"description":"Cancha desactivada exitosamente"},"404":{"description":"Cancha no encontrada o no pertenece al usuario"}},"security":[{"Bearer Authentication":[]}]}},"/users/register":{"post":{"tags":["1 - Usuarios"],"summary":"Register user","description":"Create a new user account","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateDTO"}}},"required":true},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenDTO"}}}},"409":{"description":"Some field has a useless information ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IncorrectValueResponse"}}}},"400":{"description":"Validation errors. The body is a JSON with dynamic keys corresponding to the form fields, for example: { \"username\": \"The username cannot be empty to register a user.\" }","content":{"application/json":{}}}}}},"/users/login":{"post":{"tags":["1 - Usuarios"],"summary":"Login user","description":"Login a user with their credentials to obtain a JWT token","operationId":"login_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginDTO"}}},"required":true},"responses":{"403":{"description":"Unverified email, inactive account, or invalid credentials","content":{"text/plain":{"schema":{"type":"string"}}}},"200":{"description":"Successful logging","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenDTO"}}}}},"security":[{"Bearer Authentication":[]}]}},"/teams":{"get":{"tags":["3 - Equipos"],"summary":"Listar equipos","description":"Devuelve todos los equipos del sistema","operationId":"getAllTeams","responses":{"403":{"description":"Invalid jwt access token supplied"},"200":{"description":"Equipos listados correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Team"}}}}}},"security":[{"Bearer Authentication":[]}]},"post":{"tags":["3 - Equipos"],"summary":"Crear equipo","description":"Permite crear un nuevo equipo con el usuario autenticado como capitán","operationId":"createTeam","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamCreateDTO"}}},"required":true},"responses":{"403":{"description":"Invalid jwt access token supplied"},"201":{"description":"Equipo creado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Team"}}}},"409":{"description":"Ya existe un equipo con ese nombre"},"401":{"description":"Token inválido"}},"security":[{"Bearer Authentication":[]}]}},"/fields":{"get":{"tags":["2 - Canchas"],"summary":"Listar canchas propias","description":"Obtiene todas las canchas asociadas al usuario actual","operationId":"listMyFields","responses":{"403":{"description":"Invalid jwt access token supplied"},"200":{"description":"Listado de canchas obtenido exitosamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Field"}}}}}},"security":[{"Bearer Authentication":[]}]},"post":{"tags":["2 - Canchas"],"summary":"Crear cancha","description":"Permite a un usuario crear una cancha asociada a su cuenta","operationId":"createField","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FieldCreateDTO"}}},"required":true},"responses":{"403":{"description":"Invalid jwt access token supplied"},"200":{"description":"Cancha creada exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Field"}}}},"400":{"description":"Datos inválidos o cancha duplicada"}},"security":[{"Bearer Authentication":[]}]}},"/fields/{fieldId}/availability":{"get":{"tags":["2 - Canchas"],"summary":"Ver disponibilidad","description":"Obtiene los horarios disponibles configurados para la cancha","operationId":"getAvailability","parameters":[{"name":"fieldId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Invalid jwt access token supplied"},"200":{"description":"Disponibilidad obtenida correctamente","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FieldAvailabilityDTO"}}}}},"404":{"description":"Cancha no encontrada","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FieldAvailabilityDTO"}}}}}},"security":[{"Bearer Authentication":[]}]},"post":{"tags":["2 - Canchas"],"summary":"Configurar disponibilidad","description":"Define los horarios disponibles semanales para la cancha","operationId":"setAvailability","parameters":[{"name":"fieldId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FieldAvailabilityDTO"}}}},"required":true},"responses":{"403":{"description":"Invalid jwt access token supplied"},"200":{"description":"Disponibilidad guardada correctamente"},"404":{"description":"Cancha no encontrada"}},"security":[{"Bearer Authentication":[]}]}},"/teams/{id}":{"delete":{"tags":["3 - Equipos"],"summary":"Eliminar equipo","description":"Elimina un equipo. Solo puede hacerlo el capitán.","operationId":"deleteTeam","parameters":[{"name":"id","in":"path","description":"ID del equipo","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Solo el capitán puede eliminar el equipo"},"204":{"description":"Equipo eliminado exitosamente"},"404":{"description":"Equipo no encontrado"}},"security":[{"Bearer Authentication":[]}]},"patch":{"tags":["3 - Equipos"],"summary":"Actualizar equipo","description":"Permite modificar los colores o logo de un equipo. Solo el capitán puede hacerlo.","operationId":"updateTeam","parameters":[{"name":"id","in":"path","description":"ID del equipo","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamUpdateDTO"}}},"required":true},"responses":{"403":{"description":"Solo el capitán puede modificar el equipo"},"200":{"description":"Equipo actualizado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Team"}}}},"404":{"description":"Equipo no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Team"}}}}},"security":[{"Bearer Authentication":[]}]}},"/users/verify":{"get":{"tags":["1 - Usuarios"],"summary":"Verify user account","description":"Verifies the user account associated with the provided token. The token is sent via email after registration.","operationId":"verifyUser","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Account verified successfully","content":{"text/plain":{"schema":{"type":"string"}}}},"400":{"description":"Token is invalid or expired","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/fields/all":{"get":{"tags":["2 - Canchas"],"summary":"Listar todas las canchas activas","description":"Devuelve las canchas disponibles para cualquier usuario","operationId":"listAllActiveFields","responses":{"403":{"description":"Invalid jwt access token supplied"},"200":{"description":"Listado de canchas activas","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Field"}}}}}},"security":[{"Bearer Authentication":[]}]}},"/":{"get":{"tags":["home-controller"],"operationId":"home","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"RefreshDTO":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]},"TokenDTO":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"}},"required":["accessToken"]},"FieldUpdateDTO":{"type":"object","properties":{"name":{"type":"string"},"grassType":{"type":"string"},"lighting":{"type":"boolean"},"zone":{"type":"string"},"address":{"type":"string"},"photoUrl":{"type":"string"},"price":{"type":"number","format":"double"}},"required":["address","grassType","lighting","name","photoUrl","price","zone"]},"Field":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"grassType":{"type":"string"},"lighting":{"type":"boolean"},"zone":{"type":"string"},"address":{"type":"string"},"photoUrl":{"type":"string"},"price":{"type":"number","format":"double"},"owner":{"$ref":"#/components/schemas/User"},"active":{"type":"boolean"}}},"GrantedAuthority":{"type":"object","properties":{"authority":{"type":"string"}}},"User":{"type":"object","properties":{"password":{"type":"string"},"role":{"type":"string"},"username":{"type":"string"},"emailVerified":{"type":"boolean"},"active":{"type":"boolean"},"authorities":{"type":"array","items":{"$ref":"#/components/schemas/GrantedAuthority"}},"enabled":{"type":"boolean"},"accountNonExpired":{"type":"boolean"},"accountNonLocked":{"type":"boolean"},"credentialsNonExpired":{"type":"boolean"}}},"UserCreateDTO":{"type":"object","description":"User registration data","properties":{"name":{"type":"string","description":"User's name"},"last_name":{"type":"string","description":"User's last name"},"username":{"type":"string","description":"Username address"},"password":{"type":"string","description":"User's password"},"role":{"type":"string","description":"User's role"},"gender":{"type":"string","description":"User's gender"},"age":{"type":"string","description":"User's age"},"zone":{"type":"string","description":"User's zone"}},"required":["age","gender","last_name","name","password","role","username","zone"]},"IncorrectValueResponse":{"type":"object","properties":{"field":{"type":"string"},"error_description":{"type":"string"}}},"UserLoginDTO":{"type":"object","properties":{"username":{"type":"string","description":"User's name"},"password":{"type":"string","description":"User's password"}},"required":["password","username"]},"TeamCreateDTO":{"type":"object","properties":{"name":{"type":"string"},"primaryColor":{"type":"string"},"secondaryColor":{"type":"string"},"logo":{"type":"string"}},"required":["name"]},"Team":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"captain":{"type":"string"},"primaryColor":{"type":"string"},"secondaryColor":{"type":"string"},"logo":{"type":"string"}}},"FieldCreateDTO":{"type":"object","description":"Datos de la cancha","properties":{"name":{"type":"string"},"grassType":{"type":"string"},"lighting":{"type":"boolean"},"zone":{"type":"string"},"address":{"type":"string"},"photoUrl":{"type":"string"},"price":{"type":"number","format":"double"}},"required":["address","grassType","lighting","name","photoUrl","price","zone"]},"FieldAvailabilityDTO":{"type":"object","properties":{"dayOfWeek":{"type":"string","enum":["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"]},"startTime":{"$ref":"#/components/schemas/LocalTime"},"endTime":{"$ref":"#/components/schemas/LocalTime"}},"required":["dayOfWeek","endTime","startTime"]},"LocalTime":{"type":"object","properties":{"hour":{"type":"integer","format":"int32"},"minute":{"type":"integer","format":"int32"},"second":{"type":"integer","format":"int32"},"nano":{"type":"integer","format":"int32"}}},"TeamUpdateDTO":{"type":"object","properties":{"primaryColor":{"type":"string"},"secondaryColor":{"type":"string"},"logo":{"type":"string"}}}},"securitySchemes":{"Bearer Authentication":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}